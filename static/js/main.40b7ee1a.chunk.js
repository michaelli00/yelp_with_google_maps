(this.webpackJsonpyelp_with_google_maps=this.webpackJsonpyelp_with_google_maps||[]).push([[0],{13:function(e,t,a){e.exports=a(40)},18:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),s=(a(18),a(1)),l=a(2),c=a(4),u=a(3),p=a(5),h=a(9),d={position:"absolute",width:"85%",height:"100%"},m=function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).props.initialCenter,r=n.lat,i=n.lng;return a.state={currentLocation:{lat:r,lng:i}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e.setState({currentLocation:{lat:a.latitude,lng:a.longitude}})})),this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&this.loadMap(),t.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"recenterMap",value:function(){var e=this.map,t=this.state.currentLocation,a=this.props.google.maps;if(e){var n=new a.LatLng(t.lat,t.lng);e.panTo(n)}}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google.maps,t=this.refs.map,a=o.a.findDOMNode(t),n=this.props.zoom,r=this.state.currentLocation,i=r.lat,s=r.lng,l=new e.LatLng(i,s),c=Object.assign({},{center:l,zoom:n});this.map=new e.Map(a,c)}}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return r.a.Children.map(t,(function(t){if(t)return r.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})}))}},{key:"render",value:function(){var e=Object.assign({},d);return r.a.createElement("div",null,r.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(r.a.Component),g=m;m.defaultProps={zoom:14,initialCenter:{lat:-1.2884,lng:36.8233},centerAroundCurrentLocation:!1,visible:!0};var f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0,currentLocationSelected:!1})},a.onCurrentLocationMarkerClick=function(e,t,n){a.setState({selectedPlacee:e,activeMarker:t,showingInfoWindow:!0,currentLocationSelected:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.createMarkers=function(){return a.props.data.map((function(e){var t=e.name,n=e.coordinates,i=e.image_url,o=e.url,s=e.location,l=e.display_phone,c=s.address1+", "+s.city+", "+s.state+", "+s.zip_code;return[r.a.createElement(h.Marker,{position:{lat:n.latitude,lng:n.longitude},onClick:a.onMarkerClick,name:t,url:o,src:i,location:c,locationUrl:"https://maps.google.com/?q="+c,phone:l}),r.a.createElement(h.InfoWindow,{marker:a.state.activeMarker,visible:a.state.showingInfoWindow,onClose:a.onClose},!a.state.currentLocationSelected&&r.a.createElement("div",null,r.a.createElement("h4",null,a.state.selectedPlace.name),r.a.createElement("a",{href:a.state.selectedPlace.url},"Yelp Review"),r.a.createElement("p",null,a.state.selectedPlace.location),r.a.createElement("p",null,a.state.selectedPlace.phone),r.a.createElement("center",null,r.a.createElement("img",{src:a.state.selectedPlace.src,alt:a.state.selectedPlace.name,width:"150px",height:"150px"})))||a.state.currentLocationSelected&&r.a.createElement("div",null,r.a.createElement("h4",null,"Current Location"),r.a.createElement("center",null)))]}))},a.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},hash:{},currentLocationSelected:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(g,{centerAroundCurrentLocation:!0,google:this.props.google},this.createMarkers(),r.a.createElement(h.Marker,{icon:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",onClick:this.onCurrentLocationMarkerClick,name:"current location"}))}}]),t}(n.Component),v=Object(h.GoogleApiWrapper)({apiKey:"AIzaSyDHV73IxKgp1-FH1YE4SFKJQeb5eAXEifI"})(f),b=(a(34),a(12)),k=a.n(b),C=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",null,this.props.name),r.a.createElement("div",null,r.a.createElement(k.a,{className:"star",rating:this.props.rating,starDimension:"20px",starSpacing:"0px",starRatedColor:"#00BFFF"})))}}]),t}(r.a.Component),E=(a(38),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderList=function(){return a.state.businesses.map((function(e){var t=e.id,a=e.name,n=e.rating;return r.a.createElement("div",{className:"item",key:t},r.a.createElement(C,{key:t,name:a,rating:n}))}))},a.filterList=function(e){var t=a.state.initialBusinesses;t=t.filter((function(t){return-1!==t.name.toLowerCase().search(e.target.value.toLowerCase())})),a.setState({businesses:t})},a.state={initialBusinesses:a.props.data,businesses:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({businesses:this.state.initialBusinesses})}},{key:"componentDidUpdate",value:function(e,t){t&&t.businesses!==this.state.businesses&&this.props.callBack(this.state.businesses)}},{key:"render",value:function(){var e=this.state.businesses.length;return r.a.createElement("div",{className:"list"},r.a.createElement("h2",null,e," ",e>1||0===e?" results":" result"),r.a.createElement("input",{className:"searchBar",type:"text",placeholder:"Search",onChange:this.filterList}),this.renderList())}}]),t}(r.a.Component)),w=(a(39),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).callBack=function(e){a.setState({data:e})},a.state={initialData:null,data:null,lat:null,lng:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude.toString(),n=t.coords.longitude.toString();fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=food&latitude="+a+"&longitude="+n+"&limit=50",{method:"GET",headers:{Authorization:"Bearer GZwAGFbMbXiNldKLln53GoRc92aTrl0ZJrxQsCBop0K0v-Cv2fKLfjz4By6NJpybxPaRjar9DwsUDhIg0xw0Qix05xOIfUrw5TQOiNTK6uNMTikAmmstWTdCiB1XXnYx","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){return e.setState({initialData:t.businesses,data:t.businesses})})).catch((function(e){return console.log("error",e)})),e.setState({lat:t.coords.latitude,lng:t.coords.longitude})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.data&&this.state.lat&&this.state.lng&&r.a.createElement("div",{className:"col"},r.a.createElement(E,{className:"list",data:this.state.data,callBack:this.callBack}),r.a.createElement(v,{lat:this.state.lat,lng:this.state.lng,data:this.state.data})))}}]),t}(r.a.Component));o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.40b7ee1a.chunk.js.map