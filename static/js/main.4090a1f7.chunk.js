(this.webpackJsonpyelp_with_google_maps=this.webpackJsonpyelp_with_google_maps||[]).push([[0],{13:function(e,t,a){e.exports=a(40)},18:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(7),r=a.n(i),s=(a(18),a(1)),l=a(2),c=a(4),u=a(3),p=a(5),h=a(9),d={position:"absolute",width:"100%",height:"100%"},m=function(e){function t(e){var a;Object(s.a)(this,t);var n=(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).props.initialCenter,o=n.lat,i=n.lng;return a.state={currentLocation:{lat:o,lng:i}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a=t.coords;e.setState({currentLocation:{lat:a.latitude,lng:a.longitude}})})),this.loadMap()}},{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&this.loadMap(),t.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"recenterMap",value:function(){var e=this.map,t=this.state.currentLocation,a=this.props.google.maps;if(e){var n=new a.LatLng(t.lat,t.lng);e.panTo(n)}}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google.maps,t=this.refs.map,a=r.a.findDOMNode(t),n=this.props.zoom,o=this.state.currentLocation,i=o.lat,s=o.lng,l=new e.LatLng(i,s),c=Object.assign({},{center:l,zoom:n});this.map=new e.Map(a,c)}}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return o.a.Children.map(t,(function(t){if(t)return o.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})}))}},{key:"render",value:function(){var e=Object.assign({},d);return o.a.createElement("div",null,o.a.createElement("div",{style:e,ref:"map"},"Loading map..."),this.renderChildren())}}]),t}(o.a.Component),g=m;m.defaultProps={zoom:14,initialCenter:{lat:-1.2884,lng:36.8233},centerAroundCurrentLocation:!1,visible:!0};var f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.createMarkers=function(){return a.props.data.map((function(e){var t=e.name,n=e.coordinates,i=e.image_url,r=e.url,s=e.location,l=e.display_phone,c=s.address1+", "+s.city+", "+s.state+", "+s.zip_code;return[o.a.createElement(h.Marker,{position:{lat:n.latitude,lng:n.longitude},onClick:a.onMarkerClick,name:t,url:r,src:i,location:c,locationUrl:"https://maps.google.com/?q="+c,phone:l}),o.a.createElement(h.InfoWindow,{marker:a.state.activeMarker,visible:a.state.showingInfoWindow,onClose:a.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,a.state.selectedPlace.name),o.a.createElement("a",{href:a.state.selectedPlace.url},"Yelp Review"),o.a.createElement("p",null,a.state.selectedPlace.location),o.a.createElement("p",null,a.state.selectedPlace.phone),o.a.createElement("center",null,o.a.createElement("img",{src:a.state.selectedPlace.src,alt:a.state.selectedPlace.name,width:"150px",height:"150px"}))))]}))},a.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},hash:{}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(g,{centerAroundCurrentLocation:!0,google:this.props.google},this.createMarkers(),o.a.createElement(h.Marker,{icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",onClick:this.onMarkerClick,name:"current location"}))}}]),t}(n.Component),v=Object(h.GoogleApiWrapper)({apiKey:"AIzaSyDHV73IxKgp1-FH1YE4SFKJQeb5eAXEifI"})(f),b=(a(34),a(12)),k=a.n(b),w=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",null,this.props.name),o.a.createElement("div",null,o.a.createElement(k.a,{className:"star",rating:this.props.rating,starDimension:"20px",starSpacing:"0px",starRatedColor:"#00BFFF"})))}}]),t}(o.a.Component),E=(a(38),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderList=function(){return a.state.businesses.map((function(e){var t=e.id,n=e.name,i=e.rating;return o.a.createElement("div",{className:"item",key:t,onMouseEnter:function(){return a.setState({selected:t})}},o.a.createElement(w,{key:t,name:n,rating:i,onMouseOver:a.onHover}))}))},a.filterList=function(e){var t=a.state.initialBusinesses;t=t.filter((function(t){return-1!==t.name.toLowerCase().search(e.target.value.toLowerCase())})),a.setState({businesses:t})},a.state={initialBusinesses:a.props.data,businesses:[],selected:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({businesses:this.state.initialBusinesses})}},{key:"componentDidUpdate",value:function(e,t){t&&t.businesses!==this.state.businesses&&this.props.callBack(this.state.businesses,this.state.selected)}},{key:"render",value:function(){var e=this.state.businesses.length;return o.a.createElement("div",{className:"list"},o.a.createElement("h2",null,e," ",e>1||0===e?" results":" result"),o.a.createElement("input",{className:"searchBar",type:"text",placeholder:"Search",onChange:this.filterList}),this.renderList())}}]),t}(o.a.Component)),O=(a(39),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).callBack=function(e,t){a.setState({data:e})},a.state={initialData:null,data:null,lat:null,lng:null,id:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude.toString(),n=t.coords.longitude.toString();fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=food&latitude="+a+"&longitude="+n+"&limit=50",{method:"GET",headers:{Authorization:"Bearer GZwAGFbMbXiNldKLln53GoRc92aTrl0ZJrxQsCBop0K0v-Cv2fKLfjz4By6NJpybxPaRjar9DwsUDhIg0xw0Qix05xOIfUrw5TQOiNTK6uNMTikAmmstWTdCiB1XXnYx","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){return e.setState({initialData:t.businesses,data:t.businesses})})).catch((function(e){return console.log("error",e)})),e.setState({lat:t.coords.latitude,lng:t.coords.longitude})}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.data&&this.state.lat&&this.state.lng?o.a.createElement("div",{className:"col"},o.a.createElement(E,{className:"list",data:this.state.data,callBack:this.callBack}),o.a.createElement(v,{className:"map",lat:this.state.lat,lng:this.state.lng,data:this.state.data})):null)}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.4090a1f7.chunk.js.map